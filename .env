# Data Lake Transformation API - Environment Configuration

# Application Settings
ENVIRONMENT=development
DEBUG=true
HOST=0.0.0.0
PORT=8000
WORKERS=4
LOG_LEVEL=INFO

# Security
SECRET_KEY=your-super-secret-key-change-this-in-production-minimum-32-chars-long
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Database (PostgreSQL for production, SQLite for development)
DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/datalake_api
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# Redis (for caching and job queuing)
REDIS_URL=redis://localhost:6379
REDIS_DB=0

# AWS Configuration (Required)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-access-key-id
AWS_SECRET_ACCESS_KEY=your-secret-access-key
# AWS_SESSION_TOKEN=your-session-token  # Optional for temporary credentials

# S3 Data Lake Configuration (Required)
S3_BUCKET=your-datalake-bucket
S3_BRONZE_PREFIX=data
S3_SILVER_PREFIX=silver
S3_GOLD_PREFIX=gold
S3_SCRIPTS_BUCKET=your-scripts-bucket

# AWS Glue Configuration (Required for PySpark jobs)
GLUE_JOB_NAME=data-transformation-job
GLUE_SERVICE_ROLE=arn:aws:iam::your-account-id:role/GlueServiceRole
GLUE_SCRIPT_LOCATION=s3://your-scripts-bucket/transform.py
GLUE_TEMP_DIR=s3://your-datalake-bucket/temp/
GLUE_WORKER_TYPE=G.1X
GLUE_NUMBER_OF_WORKERS=5
GLUE_DATABASE_NAME=datalake_db
# GLUE_SECURITY_CONFIG=your-security-config  # Optional

# EMR Configuration (Optional - alternative to Glue)
# EMR_CLUSTER_ID=j-XXXXXXXXXX
# EMR_SERVICE_ROLE=EMR_DefaultRole
# EMR_JOB_FLOW_ROLE=EMR_EC2_DefaultRole
# EMR_LOG_URI=s3://your-bucket/logs/

# Spark Configuration
SPARK_SCRIPT_S3_PATH=s3://your-scripts-bucket/transform.py

# Job Execution Settings
MAX_CONCURRENT_JOBS=10
JOB_TIMEOUT_MINUTES=120
MONITORING_INTERVAL_SECONDS=30
JOB_CLEANUP_DELAY_MINUTES=5

# Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_BURST=10

# Data Validation Settings
MAX_QUERY_LENGTH=10000
MAX_COLUMN_OPERATIONS=50
MAX_TAGS=10
PREVIEW_SAMPLE_SIZE=100
MAX_PREVIEW_SIZE=1000

# Data Lake Features
AUTO_CATALOG_SYNC=true
ENABLE_DATA_QUALITY_CHECKS=true
ENABLE_COST_ESTIMATION=true
ENABLE_METRICS_COLLECTION=true

# Example AWS IAM Role Policy for Glue Service Role:
# {
#   "Version": "2012-10-17",
#   "Statement": [
#     {
#       "Effect": "Allow",
#       "Action": [
#         "s3:GetObject",
#         "s3:PutObject",
#         "s3:DeleteObject",
#         "s3:ListBucket"
#       ],
#       "Resource": [
#         "arn:aws:s3:::your-datalake-bucket",
#         "arn:aws:s3:::your-datalake-bucket/*",
#         "arn:aws:s3:::your-scripts-bucket",
#         "arn:aws:s3:::your-scripts-bucket/*"
#       ]
#     },
#     {
#       "Effect": "Allow",
#       "Action": [
#         "glue:*"
#       ],
#       "Resource": "*"
#     },
#     {
#       "Effect": "Allow",
#       "Action": [
#         "logs:CreateLogGroup",
#         "logs:CreateLogStream",
#         "logs:PutLogEvents"
#       ],
#       "Resource": "*"
#     }
#   ]
# }